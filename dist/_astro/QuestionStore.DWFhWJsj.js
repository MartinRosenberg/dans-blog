import{s as r}from"./pathHelpers.DmToPstD.js";const a="quiz-";typeof window<"u"?(window.__questionStoreBySlug??={},window.__questionCountBySlug??={},window.__questionsByKeys??={},window.__questions??=[],window.__answers??={}):(globalThis.__questionCountBySlug??={},globalThis.__questionsByKeys??={},globalThis.__questions??=[],globalThis.__answers??={});const S=s=>{const c=window.__questionCountBySlug,y=window.__questionsByKeys,_=window.__questions,n=window.__answers,i=r(a+s),l=e=>r(a+s+"-"+e.title+"-"+e.question),w=localStorage.getItem(i);return console.info(`Init QuestionStore for ${i} with data`,!!w),w&&(console.info(`Loading previous quiz state for ${i}`,n),Object.assign(n,JSON.parse(w))),{countBySlug:()=>c[s]??0,countCorrectBySlug:()=>Object.entries(n).filter(([e,t])=>e.startsWith(i)&&t).length,addQuestion:e=>{const t=l(e);let o=0;return y[t]?console.warn("Question already exists",e):(c[s]??=0,o=c[s]++,y[t]=e,_.push(e)),o},isCorrect:({title:e,question:t})=>{const o=l({question:t,title:e});return console.info(`Checking if question is correct: ${o}`,n[o]),n[o]},answerQuestion:(e,t)=>{n[l(e)]=t.isAnswer;const o=r(a+"-answers-"+s);return localStorage.setItem(o,JSON.stringify(n)),console.info(`Answered question ${o} with ${t.isAnswer}`),t.isAnswer},getQuestion:({question:e,title:t})=>{const o=r(a+s+"-"+t+"-"+e),u=localStorage.getItem(o);return u?JSON.parse(u):{isCorrect:null}},setQuestion:({question:e,title:t,isCorrect:o})=>{const u=r(a+s+"-"+t+"-"+e);return localStorage.setItem(u,JSON.stringify({isCorrect:o})),o},resetBySlug:()=>{console.info(`Resetting quiz data for ${i}`,localStorage.getItem(i)),Object.keys(localStorage).forEach(e=>{e.startsWith(i)&&localStorage.removeItem(e)})}}};export{S as Q};
