webpackJsonp([0xf4b461a72d73],{1379:function(e,t){e.exports={data:{post:{id:"/Users/danlevy/code/oss/dans-blog/content/posts/2018-11-15--you-may-not-need-axios/index.md absPath of file >>> MarkdownRemark",html:'<h1 id="you-may-not-need-axios"><a href="#you-may-not-need-axios" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>You may not need Axios</h1>\n<blockquote>\n<p>This <strong>is not an attack</strong> on <a href="https://www.npmjs.com/package/axios">Axios</a>. <br />\nRather, it’s <strong>advocacy for the <code class="language-text">fetch</code> API which has become quite capable.</strong> 🦄</p>\n</blockquote>\n<p>\n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 645px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 58.12500000000001%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBBP/EABYBAQEBAAAAAAAAAAAAAAAAAAMAAf/aAAwDAQACEAMQAAAB5tgcKrLf/8QAGxAAAgEFAAAAAAAAAAAAAAAAAAECERMiMTL/2gAIAQEAAQUCUUYsojouOE9r/8QAFhEAAwAAAAAAAAAAAAAAAAAAAQIQ/9oACAEDAQE/AQs//8QAFhEAAwAAAAAAAAAAAAAAAAAAAQIQ/9oACAECAQE/AS0//8QAGRABAAMBAQAAAAAAAAAAAAAAAAEhMRFR/9oACAEBAAY/AsUxauIn2H//xAAYEAEBAQEBAAAAAAAAAAAAAAABEQAhUf/aAAgBAQABPyGKrMDIGmfRqkGzLkeOmnXTpv/aAAwDAQACAAMAAAAQ5y//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAEDAQE/EEPSH//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAgEBPxBBy2//xAAbEAEBAQACAwAAAAAAAAAAAAABEQAxQSFhcf/aAAgBAQABPxAzEHahnbwqTgwHSyCrLzrzAO54+867UJhEH1a7/9k=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image lazyload"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="credit: william-bout-103533-unsplash.jpg"\n        title=""\n        data-src="/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-ef7b7.jpg"\n        data-srcset="/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-c3db7.jpg 161w,\n/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-e67ed.jpg 323w,\n/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-ef7b7.jpg 645w,\n/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-04582.jpg 968w,\n/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-a5fcc.jpg 1280w"\n        sizes="(max-width: 645px) 100vw, 645px"\n      />\n    </span>\n  </span>\n  </p>\n<h2 id="overview"><a href="#overview" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview</h2>\n<p>I’ll be the first to say: I was an early hater of the <code class="language-text">fetch</code> API. My first attempt turned into an entirely wasted weekend. I didn’t know I was using broken examples. #fail <br />\nThe good news is that a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch">large proportion of the documentation</a> and corresponding examples have been improved, and I’ve included several <a href="#fetch-examples">code snippets</a> with <a href="#feature-comparison">common uses cases below</a>.</p>\n<p>I’ve collected up-to-date code examples for the patterns which “unlocked” <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch"><code class="language-text">fetch</code></a> for me.</p>\n<p>Check out the head-to-head <a href="#feature-comparison">Feature Comparison</a>; then browse my curated <a href="#fetch-examples">Fetch Examples</a> I’ve accumulated over the past year.</p>\n<h1 id="feature-comparison"><a href="#feature-comparison" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Feature Comparison</h1>\n<table>\n<thead>\n<tr>\n<th></th>\n<th align="center">fetch</th>\n<th align="center">axios</th>\n<th align="center">request</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Intercept request and response</td>\n<td align="center">✅</td>\n<td align="center">✅</td>\n<td align="center">✅</td>\n</tr>\n<tr>\n<td>Transform request and response data</td>\n<td align="center">✅</td>\n<td align="center">✅</td>\n<td align="center">✅</td>\n</tr>\n<tr>\n<td>Cancel requests</td>\n<td align="center">✅</td>\n<td align="center">✅</td>\n<td align="center">❌</td>\n</tr>\n<tr>\n<td>Automatic transforms for JSON data</td>\n<td align="center">✅</td>\n<td align="center">✅</td>\n<td align="center">✅</td>\n</tr>\n<tr>\n<td>Client side support for protecting against XSRF</td>\n<td align="center">✅</td>\n<td align="center">✅</td>\n<td align="center">✅</td>\n</tr>\n<tr>\n<td>Progress</td>\n<td align="center">✅</td>\n<td align="center">✅</td>\n<td align="center">✅</td>\n</tr>\n<tr>\n<td>Streaming</td>\n<td align="center">✅</td>\n<td align="center">✅</td>\n<td align="center">✅</td>\n</tr>\n</tbody>\n</table>\n<p><br /><br /></p>\n<p>When starting this article (late 2018) I assumed I’d end with a table of mixed check boxes. Surely there are special <em>Use Cases</em> which justified <a href="https://www.npmjs.com/package/axios"><code class="language-text">axios</code></a>, <a href="https://www.npmjs.com/package/request"><code class="language-text">request</code></a>, <a href="https://www.npmjs.com/package/r2"><code class="language-text">r2</code></a>, <a href="https://www.npmjs.com/package/superagent"><code class="language-text">superagent</code></a>, <a href="https://www.npmjs.com/package/got"><code class="language-text">got</code></a>, etc. Well, as it turns out, <strong>I overestimated the need for 3rd party http libraries.</strong></p>\n<p>Despite using <code class="language-text">fetch</code> for 2 years (including for non-trivial tasks: file uploads &#x26; error/retry support) I still had misconceptions of <code class="language-text">fetch</code>’s abilities and limits. (Specifically regarding <a href="#download-progress-helper">progress updates</a> or canceling requests.)</p>\n<br />\n<hr>\n<h1 id="fetch-examples"><a href="#fetch-examples" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fetch Examples</h1>\n<p>Click the links below to go directly to the code snippet.</p>\n<ol>\n<li><a href="#get-json-from-a-url">GET: JSON from a URL</a></li>\n<li><a href="#custom-headers">Custom headers</a></li>\n<li><a href="#http-error-handling">Error handling w/ HTTP status codes</a></li>\n<li><a href="#cors-example">CORS example</a></li>\n<li><a href="#posting-json">Posting JSON</a></li>\n<li><a href="#posting-an-html-form">Posting an HTML <code class="language-text">&lt;form&gt;</code></a></li>\n<li><a href="#form-encoded-data">Form encoded data</a></li>\n<li><a href="#uploading-a-file">Uploading a File</a></li>\n<li><a href="#uploading-multiple-files">Uploading Multiple Files</a></li>\n<li><a href="#timeouts">Timeouts</a></li>\n<li><a href="#download-progress-helper">Progress Percent - Download</a></li>\n<li>TODO: <em>Recursive: Retry on Failure</em></li>\n<li>TODO: <em>Recursive: Automated results paging</em></li>\n</ol>\n<blockquote>\n<p>Is your Use Case not listed? <a href="/contact/">Let me know ✉️</a></p>\n</blockquote>\n<br />\n<h3 id="get-json-from-a-url"><a href="#get-json-from-a-url" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Get JSON from a URL</h3>\n<p><code class="language-text">gist:justsml/de941bd61cc86e30beedbb8a3a646f81</code></p>\n<h3 id="custom-headers"><a href="#custom-headers" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Custom headers</h3>\n<p><code class="language-text">gist:justsml/fca7cd72ec1ebc07d994eac13a665ddf</code></p>\n<h3 id="http-error-handling"><a href="#http-error-handling" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>HTTP Error Handling</h3>\n<p><code class="language-text">gist:justsml/81919a72897ebc503c6b34a556a9bde2</code></p>\n<h3 id="cors-example"><a href="#cors-example" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CORS example</h3>\n<p>CORS is primarily checked at the server - so make sure your configuration is correct on the server-side.</p>\n<p>The <code class="language-text">credentials</code> option controls if your cookies are automatically included.</p>\n<p><code class="language-text">gist:justsml/3ddd9ed8705f48cdf45d313d1e57aa2a</code></p>\n<h3 id="posting-json"><a href="#posting-json" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Posting JSON</h3>\n<p><code class="language-text">gist:justsml/13915347d6c8413c73f4bd7240c68e51</code></p>\n<h3 id="posting-an-html-form"><a href="#posting-an-html-form" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Posting an HTML <code class="language-text">&lt;form&gt;</code></h3>\n<p><code class="language-text">gist:justsml/ef2e356bec0ef7c6e528d84a5f75ba7e</code></p>\n<h3 id="form-encoded-data"><a href="#form-encoded-data" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Form encoded data</h3>\n<p>To post data with a Content-Type of <code class="language-text">application/x-www-form-urlencoded</code> we will use <code class="language-text">URLSearchParams</code> to encode the data like a query string.</p>\n<p>For example, <code class="language-text">new URLSearchParams({a: 1, b: 2})</code> yields <code class="language-text">a=1&amp;b=2</code>.</p>\n<p><code class="language-text">gist:justsml/716c4534ef4afb22f65d4fc4367c7136</code></p>\n<h3 id="uploading-a-file"><a href="#uploading-a-file" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Uploading a file</h3>\n<p><code class="language-text">gist:justsml/301f22aa37df565ba3051bd5f95b4df1</code></p>\n<h3 id="uploading-multiple-files"><a href="#uploading-multiple-files" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Uploading multiple files</h3>\n<p>Setup a file upload element with the <code class="language-text">multiple</code> attribute:</p>\n<p><code class="language-text">gist:justsml/37836357041d8ca4d1b32e12638cb0ba</code></p>\n<p>Then use with something like:</p>\n<p><code class="language-text">gist:justsml/d17f50c36a5ddb70f584c0aa6de94237</code></p>\n<h3 id="timeouts"><a href="#timeouts" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Timeouts</h3>\n<p>Here’s a generic Promise timeout, using the “Partial Application” pattern. It’ll work with any Promise interface. Don’t do too much work in the supplied promise chain, it will keep running - and any failures have a way of creating long term memory leaks.</p>\n<p><code class="language-text">gist:justsml/f93b2ef6457b3e52eb995831b67cab85</code></p>\n<p>And a more complex example, featuring a tracking flag <code class="language-text">__timeout</code> so you can <strong>intercept any costly work.</strong></p>\n<p><code class="language-text">gist:justsml/5e492db8997a4f7e22e61b7486cbf273</code></p>\n<h3 id="download-progress-helper"><a href="#download-progress-helper" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Download Progress Helper</h3>\n<blockquote>\n<p>This is included for completeness. You may still want to use a 3rd party library here. Browser streaming interfaces may lack browser compatibility (as of late 2018).\nUpload Progress is currently a bit buggy outside of Chrome.</p>\n</blockquote>\n<p>The Progress Handler <a href="#source-progress-helper">technique shown below avoids wrapping</a> the <code class="language-text">fetch</code> call in a closure. 👍</p>\n<p><code class="language-text">progressHelper</code> has the following interface (source available below)</p>\n<p><code class="language-text">gist:justsml/db5ccc55ffb93c75e04e014d1f553cfb</code></p>\n<p>Let’s look at a usage example:</p>\n<p><code class="language-text">gist:justsml/9bec219590ff50688972c1caff67c14b</code></p>\n<p>A reusable image downloader might look like <code class="language-text">getBlob()</code>:</p>\n<p><code class="language-text">gist:justsml/bef2dd7e630eb7642beb3e2be29489b2</code></p>\n<p>By the way, a <code class="language-text">Blob</code> is a Binary Large Object.</p>\n<p>It’s important to choose ONE of the 2 usage patterns below (they are functionally equivalent):</p>\n<p><code class="language-text">gist:justsml/6ad9e37a96ad1f3a75ca509038510a5b</code></p>\n<p>My preference is <code class="language-text">Option #1</code>. However, your scope design may force you to use <code class="language-text">Option #2</code>.</p>\n<p>Finally, here’s the last part of this recipe, our <code class="language-text">progressHelper</code>:</p>\n<h4 id="source-progress-helper"><a href="#source-progress-helper" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Source: Progress Helper</h4>\n<p><code class="language-text">gist:justsml/a8ffd810fc7e5a5295dfc898302ddbfc</code></p>\n<p><em>credit:</em> Special thanks to Anthum Chris and his <a href="https://github.com/AnthumChris/fetch-progress-indicators">fantastic Progress+Fetch PoC shown here</a></p>\n<h2 id="compatibility"><a href="#compatibility" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Compatibility</h2>\n<p>“What about NodeJS and the poor IE people?!?”</p>\n<p>Fear not, the fractional % of IE9-10 users <a href="https://github.com/github/fetch#browser-support">can be polyfilled</a> with the <code class="language-text">github/fetch</code> package (maintained by some awesome team at GitHub). It’s possible to go as far back as <a href="https://github.com/camsong/fetch-ie8">IE8</a> - <em>Your mileage may vary</em>.</p>\n<p>NodeJS can take advantage of the the <code class="language-text">fetch</code> API with the <a href="https://www.npmjs.com/package/node-fetch"><code class="language-text">node-fetch</code></a> package:</p>\n<div class="gatsby-highlight" data-language="sh">\n      <pre class="language-sh"><code class="language-sh">npm install node-fetch</code></pre>\n      </div>\n<p><em>After polyfill+node-fetch: 99.99% compatible</em> ✅</p>\n<h2 id="more-coming-soon"><a href="#more-coming-soon" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>More coming soon.</h2>\n<blockquote>\n<p>Please <a href="https://twitter.com/justsml">Tweet at me</a> if you have other <em>Use Cases</em> you’d like to see. ❤️</p>\n</blockquote>\n<p>\n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 645px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 150.0586166471278%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAeABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFAgT/xAAWAQEBAQAAAAAAAAAAAAAAAAACAQD/2gAMAwEAAhADEAAAAUV56S7JMKcY4hBxzl3/xAAdEAACAQQDAAAAAAAAAAAAAAAAAhEBAxITECEi/9oACAEBAAEFArHb7YMjd7o5uUxQqqmCkk8f/8QAFxEBAAMAAAAAAAAAAAAAAAAAEAERQf/aAAgBAwEBPwHC5P/EABYRAQEBAAAAAAAAAAAAAAAAABABEf/aAAgBAgEBPwGGH//EACEQAAECBAcAAAAAAAAAAAAAAAABEQIQIjESICEyQVGh/9oACAEBAAY/AqkeeiI8RcuLU3Q+JH5N/mT/xAAdEAACAwACAwAAAAAAAAAAAAABEQAxQRBhIXGB/9oACAEBAAE/IRQE8BgQivmRzspwFZGsoSL9QCCgkCgWhkPLOBeF9zq8pz//2gAMAwEAAgADAAAAEAPuTP/EABkRAQACAwAAAAAAAAAAAAAAAAEAEBEhQf/aAAgBAwEBPxBDTtmWf//EABcRAQEBAQAAAAAAAAAAAAAAABEBABD/2gAIAQIBAT8QVrw4m//EAB8QAQACAgICAwAAAAAAAAAAAAEAESFhMVFBcZGx0f/aAAgBAQABPxBkEb8AdymChhR9Oo5hhqDEAx0Fsvt4limSEK5b8w8qJpg8kRsNjObi8hSCpc+j3K2n5H7LVFMXP//Z\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image lazyload"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="End of Dan\'s fetch API Examples"\n        title="End of Dan\'s fetch API Examples"\n        data-src="/static/jonas-vincent-2717-unsplash-0fe6abfae42d0da57ddecf64155698da-ef7b7.jpg"\n        data-srcset="/static/jonas-vincent-2717-unsplash-0fe6abfae42d0da57ddecf64155698da-c3db7.jpg 161w,\n/static/jonas-vincent-2717-unsplash-0fe6abfae42d0da57ddecf64155698da-e67ed.jpg 323w,\n/static/jonas-vincent-2717-unsplash-0fe6abfae42d0da57ddecf64155698da-ef7b7.jpg 645w,\n/static/jonas-vincent-2717-unsplash-0fe6abfae42d0da57ddecf64155698da-07a29.jpg 853w"\n        sizes="(max-width: 645px) 100vw, 645px"\n      />\n    </span>\n  </span>\n  </p>',htmlAst:{type:"root",children:[{type:"element",tagName:"h1",properties:{id:"you-may-not-need-axios"},children:[{type:"element",tagName:"a",properties:{href:"#you-may-not-need-axios",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"You may not need Axios"}]},{type:"text",value:"\n"},{type:"element",tagName:"blockquote",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"This "},{type:"element",tagName:"strong",properties:{},children:[{type:"text",value:"is not an attack"}]},{type:"text",value:" on "},{type:"element",tagName:"a",properties:{href:"https://www.npmjs.com/package/axios"},children:[{type:"text",value:"Axios"}]},{type:"text",value:". "},{type:"element",tagName:"br",properties:{},children:[]},{type:"text",value:"\nRather, it’s "},{type:"element",tagName:"strong",properties:{},children:[{type:"text",value:"advocacy for the "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"fetch"}]},{type:"text",value:" API which has become quite capable."}]},{type:"text",value:" 🦄"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 645px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 58.12500000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBBP/EABYBAQEBAAAAAAAAAAAAAAAAAAMAAf/aAAwDAQACEAMQAAAB5tgcKrLf/8QAGxAAAgEFAAAAAAAAAAAAAAAAAAECERMiMTL/2gAIAQEAAQUCUUYsojouOE9r/8QAFhEAAwAAAAAAAAAAAAAAAAAAAQIQ/9oACAEDAQE/AQs//8QAFhEAAwAAAAAAAAAAAAAAAAAAAQIQ/9oACAECAQE/AS0//8QAGRABAAMBAQAAAAAAAAAAAAAAAAEhMRFR/9oACAEBAAY/AsUxauIn2H//xAAYEAEBAQEBAAAAAAAAAAAAAAABEQAhUf/aAAgBAQABPyGKrMDIGmfRqkGzLkeOmnXTpv/aAAwDAQACAAMAAAAQ5y//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAEDAQE/EEPSH//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAgEBPxBBy2//xAAbEAEBAQACAwAAAAAAAAAAAAABEQAxQSFhcf/aAAgBAQABPxAzEHahnbwqTgwHSyCrLzrzAO54+867UJhEH1a7/9k='); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image","lazyload"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"credit: william-bout-103533-unsplash.jpg",title:"",dataSrc:"/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-ef7b7.jpg",dataSrcset:"/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-c3db7.jpg 161w,\n/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-e67ed.jpg 323w,\n/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-ef7b7.jpg 645w,\n/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-04582.jpg 968w,\n/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-a5fcc.jpg 1280w",sizes:["(max-width:","645px)","100vw,","645px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n"},{type:"element",tagName:"h2",properties:{id:"overview"},children:[{type:"element",tagName:"a",properties:{href:"#overview",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"Overview"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"I’ll be the first to say: I was an early hater of the "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"fetch"}]},{type:"text",value:" API. My first attempt turned into an entirely wasted weekend. I didn’t know I was using broken examples. #fail "},{type:"element",tagName:"br",properties:{},children:[]},{type:"text",value:"\nThe good news is that a "},{type:"element",tagName:"a",properties:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch"},children:[{type:"text",value:"large proportion of the documentation"}]},{type:"text",value:" and corresponding examples have been improved, and I’ve included several "},{type:"element",tagName:"a",properties:{href:"#fetch-examples"},children:[{type:"text",value:"code snippets"}]},{type:"text",value:" with "},{type:"element",tagName:"a",properties:{href:"#feature-comparison"},children:[{type:"text",value:"common uses cases below"}]},{type:"text",value:"."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"I’ve collected up-to-date code examples for the patterns which “unlocked” "},{type:"element",tagName:"a",properties:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch"},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"fetch"}]}]},{type:"text",value:" for me."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Check out the head-to-head "},{type:"element",tagName:"a",properties:{href:"#feature-comparison"},children:[{type:"text",value:"Feature Comparison"}]},{type:"text",value:"; then browse my curated "},{type:"element",tagName:"a",properties:{href:"#fetch-examples"},children:[{type:"text",value:"Fetch Examples"}]},{type:"text",value:" I’ve accumulated over the past year."}]},{type:"text",value:"\n"},{type:"element",tagName:"h1",properties:{id:"feature-comparison"},children:[{type:"element",tagName:"a",properties:{href:"#feature-comparison",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"
},children:[]}]}]},{type:"text",value:"Feature Comparison"}]},{type:"text",value:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{type:"element",tagName:"table",properties:{},children:[{type:"element",tagName:"thead",properties:{},children:[{type:"element",tagName:"tr",properties:{},children:[{type:"element",tagName:"th",properties:{},children:[]},{type:"element",tagName:"th",properties:{align:"center"},children:[{type:"text",value:"fetch"}]},{type:"element",tagName:"th",properties:{align:"center"},children:[{type:"text",value:"axios"}]},{type:"element",tagName:"th",properties:{align:"center"},children:[{type:"text",value:"request"}]}]}]},{type:"element",tagName:"tbody",properties:{},children:[{type:"element",tagName:"tr",properties:{},children:[{type:"element",tagName:"td",properties:{},children:[{type:"text",value:"Intercept request and response"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]}]},{type:"element",tagName:"tr",properties:{},children:[{type:"element",tagName:"td",properties:{},children:[{type:"text",value:"Transform request and response data"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]}]},{type:"element",tagName:"tr",properties:{},children:[{type:"element",tagName:"td",properties:{},children:[{type:"text",value:"Cancel requests"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"❌"}]}]},{type:"element",tagName:"tr",properties:{},children:[{type:"element",tagName:"td",properties:{},children:[{type:"text",value:"Automatic transforms for JSON data"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]}]},{type:"element",tagName:"tr",properties:{},children:[{type:"element",tagName:"td",properties:{},children:[{type:"text",value:"Client side support for protecting against XSRF"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]}]},{type:"element",tagName:"tr",properties:{},children:[{type:"element",tagName:"td",properties:{},children:[{type:"text",value:"Progress"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]}]},{type:"element",tagName:"tr",properties:{},children:[{type:"element",tagName:"td",properties:{},children:[{type:"text",value:"Streaming"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]},{type:"element",tagName:"td",properties:{align:"center"},children:[{type:"text",value:"✅"}]}]}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"br",properties:{},children:[]},{type:"element",tagName:"br",properties:{},children:[]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"When starting this article (late 2018) I assumed I’d end with a table of mixed check boxes. Surely there are special "},{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"Use Cases"}]},{type:"text",value:" which justified "},{type:"element",tagName:"a",properties:{href:"https://www.npmjs.com/package/axios"},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"axios"}]}]},{type:"text",value:", "},{type:"element",tagName:"a",properties:{href:"https://www.npmjs.com/package/request"},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"request"}]}]},{type:"text",value:", "},{type:"element",tagName:"a",properties:{href:"https://www.npmjs.com/package/r2"},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"r2"}]}]},{type:"text",value:", "},{type:"element",tagName:"a",properties:{href:"https://www.npmjs.com/package/superagent"},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"superagent"}]}]},{type:"text",value:", "},{type:"element",tagName:"a",properties:{href:"https://www.npmjs.com/package/got"},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"got"}]}]},{type:"text",value:", etc. Well, as it turns out, "},{type:"element",tagName:"strong",properties:{},children:[{type:"text",value:"I overestimated the need for 3rd party http libraries."}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Despite using "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"fetch"}]},{type:"text",value:" for 2 years (including for non-trivial tasks: file uploads & error/retry support) I still had misconceptions of "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"fetch"}]},{type:"text",value:"’s abilities and limits. (Specifically regarding "},{type:"element",tagName:"a",properties:{href:"#download-progress-helper"},children:[{type:"text",value:"progress updates"}]},{type:"text",value:" or canceling requests.)"}]},{type:"text",value:"\n"},{type:"element",tagName:"br",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"hr",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"h1",properties:{id:"fetch-examples"},children:[{type:"element",tagName:"a",properties:{href:"#fetch-examples",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"Fetch Examples"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Click the links below to go directly to the code snippet."}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"a",properties:{href:"#get-json-from-a-url"},children:[{type:"text",value:"GET: JSON from a URL"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"a",properties:{href:"#custom-headers"},children:[{type:"text",value:"Custom headers"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"a",properties:{href:"#http-error-handling"},children:[{type:"text",value:"Error handling w/ HTTP status codes"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"a",properties:{href:"#cors-example"},children:[{type:"text",value:"CORS example"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"a",properties:{href:"#posting-json"},children:[{type:"text",value:"Posting JSON"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"a",properties:{href:"#posting-an-html-form"},children:[{type:"text",value:"Posting an HTML "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"<form>"}]}]}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"a",properties:{href:"#form-encoded-data"},children:[{type:"text",value:"Form encoded data"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"a",properties:{href:"#uploading-a-file"},children:[{type:"text",value:"Uploading a File"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"a",properties:{href:"#uploading-multiple-files"},children:[{type:"text",value:"Uploading Multiple Files"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"a",properties:{href:"#timeouts"},children:[{type:"text",value:"Timeouts"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"element",tagName:"a",properties:{href:"#download-progress-helper"},children:[{type:"text",value:"Progress Percent - Download"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"TODO: "},{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"Recursive: Retry on Failure"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"li",properties:{},children:[{type:"text",value:"TODO: "},{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"Recursive: Automated results paging"}]}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"blockquote",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Is your Use Case not listed? "},{type:"element",tagName:"a",properties:{href:"/contact/"},children:[{type:"text",value:"Let me know ✉️"}]}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"br",properties:{},children:[]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{id:"get-json-from-a-url"},children:[{type:"element",tagName:"a",properties:{href:"#get-json-from-a-url",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"Get JSON from a URL"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"gist:justsml/de941bd61cc86e30beedbb8a3a646f81"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{id:"custom-headers"},children:[{type:"element",tagName:"a",properties:{href:"#custom-headers",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"Custom headers"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"gist:justsml/fca7cd72ec1ebc07d994eac13a665ddf"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{id:"http-error-handling"},children:[{type:"element",tagName:"a",properties:{href:"#http-error-handling",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"HTTP Error Handling"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"gist:justsml/81919a72897ebc503c6b34a556a9bde2"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{id:"cors-example"},children:[{type:"element",tagName:"a",properties:{href:"#cors-example",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"CORS example"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"CORS is primarily checked at the server - so make sure your configuration is correct on the server-side."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"The "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"credentials"}]},{type:"text",value:" option controls if your cookies are automatically included."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"gist:justsml/3ddd9ed8705f48cdf45d313d1e57aa2a"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{id:"posting-json"},children:[{type:"element",tagName:"a",properties:{href:"#posting-json",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"Posting JSON"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"gist:justsml/13915347d6c8413c73f4bd7240c68e51"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{id:"posting-an-html-form"},children:[{type:"element",tagName:"a",properties:{href:"#posting-an-html-form",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"Posting an HTML "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"<form>"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"gist:justsml/ef2e356bec0ef7c6e528d84a5f75ba7e"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{id:"form-encoded-data"},children:[{type:"element",tagName:"a",properties:{href:"#form-encoded-data",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"Form encoded data"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"To post data with a Content-Type of "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"application/x-www-form-urlencoded"}]},{type:"text",value:" we will use "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"URLSearchParams"}]},{type:"text",value:" to encode the data like a query string."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"For example, "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"new URLSearchParams({a: 1, b: 2})"}]},{type:"text",value:" yields "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"a=1&b=2"}]},{type:"text",value:"."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"gist:justsml/716c4534ef4afb22f65d4fc4367c7136"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{id:"uploading-a-file"},children:[{type:"element",tagName:"a",properties:{href:"#uploading-a-file",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"Uploading a file"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"gist:justsml/301f22aa37df565ba3051bd5f95b4df1"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{id:"uploading-multiple-files"},children:[{type:"element",tagName:"a",properties:{href:"#uploading-multiple-files",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"Uploading multiple files"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Setup a file upload element with the "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"multiple"}]},{type:"text",value:" attribute:"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"gist:justsml/37836357041d8ca4d1b32e12638cb0ba"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Then use with something like:"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"gist:justsml/d17f50c36a5ddb70f584c0aa6de94237"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{id:"timeouts"},children:[{type:"element",tagName:"a",properties:{href:"#timeouts",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"Timeouts"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Here’s a generic Promise timeout, using the “Partial Application” pattern. It’ll work with any Promise interface. Don’t do too much work in the supplied promise chain, it will keep running - and any failures have a way of creating long term memory leaks."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"gist:justsml/f93b2ef6457b3e52eb995831b67cab85"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"And a more complex example, featuring a tracking flag "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"__timeout"}]},{type:"text",value:" so you can "},{type:"element",tagName:"strong",properties:{},children:[{type:"text",value:"intercept any costly work."}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"gist:justsml/5e492db8997a4f7e22e61b7486cbf273"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"h3",properties:{id:"download-progress-helper"},children:[{type:"element",tagName:"a",properties:{href:"#download-progress-helper",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"Download Progress Helper"}]},{type:"text",value:"\n"},{type:"element",tagName:"blockquote",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"This is included for completeness. You may still want to use a 3rd party library here. Browser streaming interfaces may lack browser compatibility (as of late 2018).\nUpload Progress is currently a bit buggy outside of Chrome."}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"The Progress Handler "},{type:"element",tagName:"a",properties:{href:"#source-progress-helper"},children:[{type:"text",value:"technique shown below avoids wrapping"}]},{type:"text",value:" the "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"fetch"}]},{type:"text",value:" call in a closure. 👍"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"progressHelper"}]},{type:"text",value:" has the following interface (source available below)"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"gist:justsml/db5ccc55ffb93c75e04e014d1f553cfb"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Let’s look at a usage example:"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"gist:justsml/9bec219590ff50688972c1caff67c14b"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"A reusable image downloader might look like "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"getBlob()"}]},{type:"text",value:":"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"gist:justsml/bef2dd7e630eb7642beb3e2be29489b2"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"By the way, a "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"Blob"}]},{type:"text",value:" is a Binary Large Object."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"It’s important to choose ONE of the 2 usage patterns below (they are functionally equivalent):"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"gist:justsml/6ad9e37a96ad1f3a75ca509038510a5b"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"My preference is "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"Option #1"}]},{type:"text",value:". However, your scope design may force you to use "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"Option #2"}]},{type:"text",value:"."}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Finally, here’s the last part of this recipe, our "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"progressHelper"}]},{type:"text",value:":"}]},{type:"text",value:"\n"},{type:"element",tagName:"h4",properties:{id:"source-progress-helper"},children:[{type:"element",tagName:"a",properties:{href:"#source-progress-helper",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"Source: Progress Helper"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"gist:justsml/a8ffd810fc7e5a5295dfc898302ddbfc"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"credit:"}]},{type:"text",value:" Special thanks to Anthum Chris and his "},{type:"element",tagName:"a",properties:{href:"https://github.com/AnthumChris/fetch-progress-indicators"},children:[{type:"text",value:"fantastic Progress+Fetch PoC shown here"}]}]},{type:"text",value:"\n"},{type:"element",tagName:"h2",properties:{id:"compatibility"},children:[{type:"element",tagName:"a",properties:{href:"#compatibility",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"Compatibility"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"“What about NodeJS and the poor IE people?!?”"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Fear not, the fractional % of IE9-10 users "},{type:"element",tagName:"a",properties:{href:"https://github.com/github/fetch#browser-support"},children:[{type:"text",value:"can be polyfilled"}]},{type:"text",value:" with the "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"github/fetch"}]},{type:"text",value:" package (maintained by some awesome team at GitHub). It’s possible to go as far back as "},{type:"element",tagName:"a",properties:{href:"https://github.com/camsong/fetch-ie8"},children:[{type:"text",value:"IE8"}]},{type:"text",value:" - "},{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"Your mileage may vary"}]},{type:"text",value:"."
}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"NodeJS can take advantage of the the "},{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"fetch"}]},{type:"text",value:" API with the "},{type:"element",tagName:"a",properties:{href:"https://www.npmjs.com/package/node-fetch"},children:[{type:"element",tagName:"code",properties:{className:["language-text"]},children:[{type:"text",value:"node-fetch"}]}]},{type:"text",value:" package:"}]},{type:"text",value:"\n"},{type:"element",tagName:"div",properties:{className:["gatsby-highlight"],dataLanguage:"sh"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"pre",properties:{className:["language-sh"]},children:[{type:"element",tagName:"code",properties:{className:["language-sh"]},children:[{type:"text",value:"npm install node-fetch"}]}]},{type:"text",value:"\n      "}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"After polyfill+node-fetch: 99.99% compatible"}]},{type:"text",value:" ✅"}]},{type:"text",value:"\n"},{type:"element",tagName:"h2",properties:{id:"more-coming-soon"},children:[{type:"element",tagName:"a",properties:{href:"#more-coming-soon",ariaHidden:!0,className:["anchor"]},children:[{type:"element",tagName:"svg",properties:{ariaHidden:"true",height:16,version:"1.1",viewBox:"0 0 16 16",width:16},children:[{type:"element",tagName:"path",properties:{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},children:[]}]}]},{type:"text",value:"More coming soon."}]},{type:"text",value:"\n"},{type:"element",tagName:"blockquote",properties:{},children:[{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"Please "},{type:"element",tagName:"a",properties:{href:"https://twitter.com/justsml"},children:[{type:"text",value:"Tweet at me"}]},{type:"text",value:" if you have other "},{type:"element",tagName:"em",properties:{},children:[{type:"text",value:"Use Cases"}]},{type:"text",value:" you’d like to see. ❤️"}]},{type:"text",value:"\n"}]},{type:"text",value:"\n"},{type:"element",tagName:"p",properties:{},children:[{type:"text",value:"\n  "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-wrapper"],style:"position: relative; display: block; ; max-width: 645px; margin-left: auto; margin-right: auto;"},children:[{type:"text",value:"\n    "},{type:"element",tagName:"span",properties:{className:["gatsby-resp-image-background-image"],style:"padding-bottom: 150.0586166471278%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAeABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFAgT/xAAWAQEBAQAAAAAAAAAAAAAAAAACAQD/2gAMAwEAAhADEAAAAUV56S7JMKcY4hBxzl3/xAAdEAACAQQDAAAAAAAAAAAAAAAAAhEBAxITECEi/9oACAEBAAEFArHb7YMjd7o5uUxQqqmCkk8f/8QAFxEBAAMAAAAAAAAAAAAAAAAAEAERQf/aAAgBAwEBPwHC5P/EABYRAQEBAAAAAAAAAAAAAAAAABABEf/aAAgBAgEBPwGGH//EACEQAAECBAcAAAAAAAAAAAAAAAABEQIQIjESICEyQVGh/9oACAEBAAY/AqkeeiI8RcuLU3Q+JH5N/mT/xAAdEAACAwACAwAAAAAAAAAAAAABEQAxQRBhIXGB/9oACAEBAAE/IRQE8BgQivmRzspwFZGsoSL9QCCgkCgWhkPLOBeF9zq8pz//2gAMAwEAAgADAAAAEAPuTP/EABkRAQACAwAAAAAAAAAAAAAAAAEAEBEhQf/aAAgBAwEBPxBDTtmWf//EABcRAQEBAQAAAAAAAAAAAAAAABEBABD/2gAIAQIBAT8QVrw4m//EAB8QAQACAgICAwAAAAAAAAAAAAEAESFhMVFBcZGx0f/aAAgBAQABPxBkEb8AdymChhR9Oo5hhqDEAx0Fsvt4limSEK5b8w8qJpg8kRsNjObi8hSCpc+j3K2n5H7LVFMXP//Z'); background-size: cover; display: block;"},children:[{type:"text",value:"\n      "},{type:"element",tagName:"img",properties:{className:["gatsby-resp-image-image","lazyload"],style:"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;",alt:"End of Dan's fetch API Examples",title:"End of Dan's fetch API Examples",dataSrc:"/static/jonas-vincent-2717-unsplash-0fe6abfae42d0da57ddecf64155698da-ef7b7.jpg",dataSrcset:"/static/jonas-vincent-2717-unsplash-0fe6abfae42d0da57ddecf64155698da-c3db7.jpg 161w,\n/static/jonas-vincent-2717-unsplash-0fe6abfae42d0da57ddecf64155698da-e67ed.jpg 323w,\n/static/jonas-vincent-2717-unsplash-0fe6abfae42d0da57ddecf64155698da-ef7b7.jpg 645w,\n/static/jonas-vincent-2717-unsplash-0fe6abfae42d0da57ddecf64155698da-07a29.jpg 853w",sizes:["(max-width:","645px)","100vw,","645px"]},children:[]},{type:"text",value:"\n    "}]},{type:"text",value:"\n  "}]},{type:"text",value:"\n  "}]}],data:{quirksMode:!1}},wordCount:{paragraphs:86,sentences:101,words:644},fields:{slug:"/you-may-not-need-axios/",prefix:"2018-11-15"},frontmatter:{title:"You may not need Axios",subTitle:"Fetch API to the rescue!",category:"programming",relativePath:"/content/posts/2018-11-15--you-may-not-need-axios/index.md",tags:["programming","patterns","source code","nodejs","javascript","promises"],date:"2018-11-14T00:00:00.000Z",modified:"2019-01-07T00:00:00.000Z",cover:{childImageSharp:{resolutions:{width:220,height:220,src:"/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-bc901.jpg",srcSet:"/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-bc901.jpg 1x,\n/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-39e82.jpg 1.5x,\n/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-a8256.jpg 2x,\n/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-ef5e1.jpg 3x",srcWebp:"/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-ec1cf.webp",srcSetWebp:"/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-ec1cf.webp 1x,\n/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-c5012.webp 1.5x,\n/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-6ab8f.webp 2x,\n/static/william-bout-103533-unsplash-c03daa32b912a296304cf89aae1c938e-f9a43.webp 3x"}}}}},author:{id:"/Users/danlevy/code/oss/dans-blog/content/parts/author.md absPath of file >>> MarkdownRemark",html:'<p>Dan Levy is an accomplished programmer, teacher, speaker, cat dad and writer.\n<br /><br /></p>\n<p>Dan’s Open Source documentation and related writing is relied on by countless developers who use the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch">Mozilla Developer Network</a> site daily.\n<br /><br /></p>\n<p>His contributions span dozens of well-known projects, including <a href="https://github.com/nodejs/nodejs.org">NodeJS</a>, <a href="https://github.com/moby/moby">Docker</a>, <a href="https://github.com/ReactTraining/react-router/">React Router</a>, <a href="https://github.com/gatsbyjs/gatsby">GatsbyJS</a>, <a href="https://github.com/Angular/Angular">Angular</a>, <a href="https://github.com/petkaantonov/bluebird">Bluebird</a>, <a href="https://github.com/lodash/lodash">Lodash</a>, <a href="https://github.com/rancher/rancher">Rancher</a>, <a href="https://github.com/minio/minio">Minio</a>, <a href="https://github.com/lord/slate">Slate</a>, <a href="https://github.com/ReactiveX/IxJS">IxJS</a>, and <a href="https://github.com/functional-promises/functional-promises">Functional Promises</a>.\n<br /><br /></p>\n<p>Feel free to <a href="https://calendly.com/danlevy/">grab a spot on Dan’s calendar</a>, or reach out via <a href="https://twitter.com/justsml/">Twitter DMs</a> or <a href="/contact/">the contact form</a>.</p>'},footnote:{id:"/Users/danlevy/code/oss/dans-blog/content/parts/footnote.md absPath of file >>> MarkdownRemark",html:'<p>Unless otherwise noted, copyright ©2014-2021 Dan Levy.</p>\n<ul>\n<li>Photos by <a href="https://unsplash.com">unsplash.com</a></li>\n</ul>'},site:{siteMetadata:{facebook:{appId:""}}},allTags:{group:[{fieldValue:"ai",totalCount:1},{fieldValue:"amazon-web-services",totalCount:1},{fieldValue:"angularjs",totalCount:2},{fieldValue:"api-keys",totalCount:2},{fieldValue:"architecture",totalCount:1},{fieldValue:"artificial intelligence",totalCount:1},{fieldValue:"async",totalCount:5},{fieldValue:"async-await",totalCount:1},{fieldValue:"await",totalCount:1},{fieldValue:"azure",totalCount:1},{fieldValue:"benchmarks",totalCount:1},{fieldValue:"boot2docker",totalCount:1},{fieldValue:"challenge",totalCount:1},{fieldValue:"cloud",totalCount:1},{fieldValue:"collaborative-culture",totalCount:1},{fieldValue:"composition",totalCount:4},{fieldValue:"culture",totalCount:1},{fieldValue:"date",totalCount:1},{fieldValue:"date class",totalCount:1},{fieldValue:"debugging",totalCount:1},{fieldValue:"design",totalCount:1},{fieldValue:"development",totalCount:2},{fieldValue:"devops",totalCount:5},{fieldValue:"digital-ocean",totalCount:1},{fieldValue:"docker",totalCount:4},{fieldValue:"dos",totalCount:1},{fieldValue:"dotenv",totalCount:1},{fieldValue:"elasticsearch",totalCount:1},{fieldValue:"errors",totalCount:2},{fieldValue:"fails",totalCount:1},{fieldValue:"functional river",totalCount:1},{fieldValue:"go",totalCount:1},{fieldValue:"google-cloud-engine",totalCount:1},{fieldValue:"gotchas",totalCount:1},{fieldValue:"growth",totalCount:1},{fieldValue:"guides",totalCount:1},{fieldValue:"haskell",totalCount:1},{fieldValue:"io",totalCount:1},{fieldValue:"javascript",totalCount:11},{fieldValue:"json-web-tokens",totalCount:1},{fieldValue:"languages",totalCount:1},{fieldValue:"lua",totalCount:1},{fieldValue:"models",totalCount:1},{fieldValue:"mongodb",totalCount:2},{fieldValue:"mysql",totalCount:1},{fieldValue:"naming",totalCount:1},{fieldValue:"nodejs",totalCount:3},{fieldValue:"opinion",totalCount:1},{fieldValue:"organization",totalCount:2},{fieldValue:"ovh.net",totalCount:1},{fieldValue:"packet.net",totalCount:1},{fieldValue:"patterns",totalCount:7},{fieldValue:"performance",totalCount:4},{fieldValue:"personal-development",totalCount:1},{fieldValue:"postgres",totalCount:1},{fieldValue:"programming",totalCount:10},{fieldValue:"promises",totalCount:8},{fieldValue:"python",totalCount:2},{fieldValue:"quiz",totalCount:2},{fieldValue:"regex",totalCount:1},{fieldValue:"remote-exploit",totalCount:1},{fieldValue:"resources",totalCount:1},{fieldValue:"rust",totalCount:1},{fieldValue:"scala",totalCount:1},{fieldValue:"scaling",totalCount:1},{fieldValue:"secrets",totalCount:2},{fieldValue:"security",totalCount:4},{fieldValue:"self-driving cars",totalCount:1},{fieldValue:"server",totalCount:1},{fieldValue:"servers",totalCount:2},{fieldValue:"setup",totalCount:1},{fieldValue:"shell script",totalCount:1},{fieldValue:"smalltalk",totalCount:1},{fieldValue:"source code",totalCount:3},{fieldValue:"ssd",totalCount:1},{fieldValue:"teams",totalCount:1},{fieldValue:"tokens",totalCount:2},{fieldValue:"tuning",totalCount:1},{fieldValue:"visualizing",totalCount:1}]}},pathContext:{slug:"/you-may-not-need-axios/"}}}});
//# sourceMappingURL=path---you-may-not-need-axios-fcc0c8e2d96876f75ff3.js.map